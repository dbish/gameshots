{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{url_for('static', filename='feed.css')}}">
<script src="{{url_for('static', filename='feed.js')}}"></script>
<div class="container">
	<div class="row">
	<div class="col-10">
	{% for post in posts %}
	{% if post.completed == 1 %}
	<div class="card border border-warning post {{post.gameNormalized}}" id={{post.id}}>
	{% else %}
	<div class="card {{post.gameNormalized}}" id={{post.id}}>
	{% endif %}
			<div class="card-header">
				<a href="{{url_for('viewProfile',username=post.username)}}">{{post.username}}</a><i class="fa fa-gamepad"></i> <i>{{post.game}}</i> 
				<div class="coins">{{post.coins}}</i></div>
			</div>
			<a href="{{url_for('viewPost', postid=post.id)}}"><img src="{{post.image}}" class="card-img-top"></a>
			<div class="card-body">
				{% if post.voted %}
				<button class="btn upvoteButton" onclick="upvotePost('{{post.id}}')" style="display:none">+1</button> 
				<button class="btn downvoteButton" onclick="downvotePost('{{post.id}}')">-1</button> 
				{% else %}
				<button class="btn upvoteButton" onclick="upvotePost('{{post.id}}')">+1</button> 
				<button class="btn downvoteButton" onclick="downvotePost('{{post.id}}')" style="display:none">-1</button> 

				{% endif %}
				<button class="btn more"><i class="fa fa-ellipsis-h"></i></button> 
				<p class="card-text text-light bg-dark rounded">{{post.time}}/>{{post.editorial}}</p>
				<ul class="commentsList">
					{% for comment in post.comments %}
					<li><a href="/gamer/{{comment.username}}">{{comment.username}}</a>: {{comment.text}}

					{% if comment.username == screen_name %}
					<button type="button" class="btn btn-danger" onclick="deleteComment('{{comment.id}}', this)">-</button>
					{% endif %}
					</li>
					{% endfor %}
				</ul>
			</div>
			<div class="card-body">
				<input class="commentbox" class="form-control" placeholder="enter comment...">
				<button class="btn" onclick="postComment('{{post.id}}', '{{screen_name}}')">post</button>
			</div>
	</div>
	{% endfor %}
	</div>
	<div id="shownGames" class="col-2">
		{% for game in games %}
		<div class="gameToggle border-bottom border-left border-white rounded-left">
		{{game[0]}}
		<label class="switch">
			<input type="checkbox" checked onchange="toggleGame('{{game[1]}}', this)">
		  <span class="slider"></span>
		</label>
		</div>

		{% endfor %}
	</div>
	</div>
</div>
{% endblock %}
