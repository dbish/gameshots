{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{url_for('static', filename='profile.css')}}">
<script src="{{url_for('static', filename='viewProfile.js')}}"></script>
<div class="container">
	<div>
		<h2 class="text-light text-center">{{username}}
		{% if username != myusername %}
			</h2>
			{% if username in following %}
				<button onclick="followUser('{{username}}')" id="followButton" type="button" class="btn btn-primary" style="display:none">follow</button>
				<button onclick="unfollowUser('{{username}}')" id="unfollowButton" type="button" class="btn btn-primary">unfollow</button>
			{% else %}
				<button onclick="followUser('{{username}}')" id="followButton" type="button" class="btn btn-primary">follow</button>
				<button onclick="unfollowUser('{{username}}')" id="unfollowButton" type="button" class="btn btn-primary" style="display:none">unfollow</button>
			{% endif %}
		{% else %}
		<a href="{{url_for('logout')}}" class="badge badge-light badge-pill">logout</a>
			 </h2>
		{% endif %}
	</div>
	<div>
		<h5 class="text-light text-center"><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#followersModal">followers: {{profile_followers|length}}</button></h3>
		<h5 class="text-light text-center"><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#followingModal">following: {{profile_following|length}}</button></h3>

	</div>
	<div>
		<h3 class="text-light">games:</h3>
		{% for game in games %}
		<span class="badge badge-primary">{{game}}</span>
		{% endfor %}
		<hr/>
	</div>

	<div>
	{% for post in posts %}
		<div class="card">
			{% if post[2]==1%}
			<a href="{{url_for('viewPost', postid=post[0])}}"><img src="{{post[1]}}" class="card-img-top mx-auto border border-warning"></a>
			{% else %}
			<a href="{{url_for('viewPost', postid=post[0])}}"><img src="{{post[1]}}" class="card-img-top mx-auto"></a>
			{% endif %}
		</div>
	{% endfor %}
	</div>
</div>
<!-- Modal -->
<div class="modal fade" id="followingModal" tabindex="-1" role="dialog" aria-labelledby="followingModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Following</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
	<ul>
	{% for follow in profile_following %}
	<li><a href="{{url_for('viewProfile', username=follow)}}">{{follow}}</a></li> 
	{% endfor %}
	</ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="followersModal" tabindex="-1" role="dialog" aria-labelledby="followersModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Followers</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
	<ul>
	{% for follower in profile_followers %}
	<li><a href="{{url_for('viewProfile', username=follower)}}">{{follower}}</a></li> 
	{% endfor %}
	</ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
